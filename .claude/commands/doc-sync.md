# Document Sync and Management

문서를 현재 프로젝트 상태에 맞게 최신화하거나, 문서 구조를 개선합니다.

## 작업 모드

### 1. 최신화 모드 (기본)

특정 폴더나 파일의 문서를 코드 구현과 비교하여 업데이트합니다.

### 2. 구조 개선 모드

문서 구조를 분석하고 재정리합니다 (단일 파일 폴더 통합, 중복 제거 등).

## 작업 순서

### 최신화 모드

1. **대상 확인**

    - 인자로 받은 폴더 또는 파일 경로 확인
    - 인자가 없으면 `docs/` 전체를 대상으로 함

2. **현황 분석**

    - 문서 내용 읽기 (Read 도구)
    - 관련 구현 코드 찾기 (Glob, Grep 도구)
    - 문서와 코드 간 차이점 파악

3. **최신화 필요 항목 식별**

    - 누락된 기능이나 변경사항
    - 오래된 정보나 잘못된 참조
    - 불완전한 설명

4. **문서 업데이트**

    - **중요**: 코드를 상세하게 다루지 말 것
    - **개념과 메커니즘 중심**으로 작성
    - 아키텍처 흐름과 시나리오 위주
    - 코드 예시는 핵심 이해에 꼭 필요한 경우만 간단히
    - 적절한 분량 유지 (과도한 확장 지양)

5. **결과 보고**
    - 변경된 내용 요약
    - 추가 개선 제안 (필요시)

### 구조 개선 모드

1. **문서 구조 스캔**

    - 전체 문서 트리 확인
    - 단일 파일만 있는 폴더 식별
    - 중복 내용이나 유사 주제 파악

2. **개선 방안 제시**

    - 단일 파일 폴더의 통합/재배치 옵션
    - 중복 문서 병합 제안
    - 불필요한 문서의 아카이브 제안

3. **사용자 확인**

    - 구조 변경은 영향이 크므로 반드시 사용자 승인 필요
    - AskUserQuestion 도구로 선택지 제공

4. **구조 개선 실행**

    - 파일 이동, 병합, 아카이브 처리
    - README.md 및 인덱스 파일 업데이트
    - CLAUDE.md의 문서 경로 참조 업데이트

5. **결과 보고**
    - 변경된 구조 요약
    - 문서 개수 변화 (삭제 X, 아카이브 O)

## 핵심 원칙

### 문서 작성 스타일

- ✅ 개념과 메커니즘 중심 설명
- ✅ 시스템 아키텍처 및 데이터 흐름
- ✅ 사용 시나리오와 예시
- ❌ 코드 구현 세부사항 과다
- ❌ 긴 코드 스니펫 (간단한 것만)
- ❌ 함수 시그니처 나열

### 문서 관리 원칙

- 불필요한 문서는 **삭제 대신 아카이브**
- 문서 **양 최적화** (관리 가능한 수준 유지)
- 단일 파일 폴더는 재구성 검토
- 중복 내용 제거 또는 병합

## 인자

```
/doc-sync [경로] [--mode=구조개선]
```

- `[경로]`: 문서 파일 또는 폴더 경로 (선택, 기본값: docs/)
- `--mode=구조개선`: 구조 개선 모드 활성화 (선택)

## 사용 예시

### 예시 1: 특정 폴더 최신화

```
/doc-sync docs/reminders
```

reminders 폴더의 모든 문서를 현재 코드와 비교하여 최신화

### 예시 2: 특정 파일 최신화

```
/doc-sync docs/authentication/fetch-user-id.md
```

해당 파일만 최신화

### 예시 3: 전체 문서 최신화

```
/doc-sync
```

docs/ 전체를 최신화 (시간이 오래 걸릴 수 있음)

### 예시 4: 구조 개선

```
/doc-sync --mode=구조개선
```

문서 구조를 분석하고 개선 방안 제시

### 예시 5: 특정 폴더 구조 개선

```
/doc-sync docs/authentication --mode=구조개선
```

authentication 폴더의 구조 개선

## 주의사항

- 문서 업데이트는 **개념 중심, 코드 최소화**
- 구조 변경은 반드시 사용자 확인 후 진행
- 대규모 변경 시 변경 영향 범위 명시
- 아카이브는 `docs/archive/YYYY/` 형식 사용
- CLAUDE.md 및 관련 인덱스 파일 동기화 필수

## 관련 파일

- 프로젝트 문서: `docs/`
- 메인 가이드: `CLAUDE.md`, `README.md`
- 아카이브: `docs/archive/`
- 문서 인덱스: `docs/README.md`, `docs/*/README.md`
